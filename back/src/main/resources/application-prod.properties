# ===============================================
# product
# ===============================================

# ===============================================
# server port
# ===============================================
server.port=${SERVER_PORT:8080}

# ===============================================
# mysql
# ===============================================
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://${DB_HOST_PROD:orakgaraki-mysql}:${DB_PORT_PROD:3306}/${DB_NAME_PROD:orakgaraki}?useSSL=true&requireSSL=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8&useUnicode=true
spring.datasource.username=${DB_USERNAME_PROD}
spring.datasource.password=${DB_PASSWORD_PROD}

# ===============================================
# JPA
# ===============================================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.jdbc.batch_size=50

# ===============================================
# data source
# ===============================================
spring.datasource.hikari.maximum-pool-size=30
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# ===============================================
# Redis
# ===============================================
spring.data.redis.host=${REDIS_HOST:orakgaraki-redis}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD}
spring.session.store-type=redis
spring.session.timeout=7200
spring.session.redis.namespace=orakgaraki:session:prod
spring.cache.type=redis
spring.cache.redis.time-to-live=1800000
spring.cache.redis.cache-null-values=false

# ===============================================
# logging
# ===============================================
logging.config=classpath:log4j2-prod.xml
logging.file.path=/var/log/orak

# ===============================================
# CORS
# ===============================================
spring.web.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://orakgaraki.com,https://www.orakgaraki.com}

# ===============================================
# OAuth2
# ===============================================
spring.security.oauth2.client.registration.google.redirect-uri=${GOOGLE_REDIRECT_URI:https://api.orakgaraki.com/api/login/oauth2/code/google}

# ===============================================
# SSL
# ===============================================
server.ssl.enabled=true
server.ssl.key-store=${SSL_KEYSTORE_PATH:/app/ssl/keystore.p12}
server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD}
server.ssl.key-store-type=PKCS12
server.ssl.key-alias=${SSL_KEY_ALIAS:orakgaraki}

# ===============================================
# healthcheck
# ===============================================
management.endpoint.health.show-details=when-authorized
management.endpoints.web.exposure.include=health,info,metrics

# ===============================================
# logging
# ===============================================
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never
server.error.include-exception=false

# ===============================================
# Swagger
# ===============================================
springdoc.swagger-ui.enabled=${SWAGGER_ENABLED:false}
springdoc.api-docs.enabled=${SWAGGER_ENABLED:false}

# ===============================================
# session
# ===============================================
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict