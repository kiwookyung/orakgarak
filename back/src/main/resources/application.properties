# ===============================================
# ?????? ?? ??
# ===============================================
spring.application.name=OrakgarakiApplication
server.port=8080
server.servlet.context-path=/api

# ===============================================
# ?????? ??
# ===============================================
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:orakgaraki}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8&useUnicode=true
spring.datasource.username=${DB_USERNAME:orakgaraki}
spring.datasource.password=${DB_PASSWORD}

# ??? ? ??
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.initialization-fail-timeout=60000
spring.datasource.hikari.validation-timeout=5000

# ===============================================
# JPA ??
# ===============================================
spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# ===============================================
# Redis ??
# ===============================================
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:orakgaraki-redis-secure-password-2024}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# ?? ??? ??
spring.session.store-type=redis
spring.session.timeout=3600
spring.session.redis.namespace=orakgaraki:session

# ===============================================
# JWT ??
# ===============================================
jwt.secret=${JWT_SECRET:orakgaraki-super-secret-key-for-jwt-tokens}
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}

# ===============================================
# OAuth2 ??
# ===============================================
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=profile,email
spring.security.oauth2.client.registration.google.redirect-uri=${GOOGLE_REDIRECT_URI:http://localhost:8080/api/login/oauth2/code/google}

# OAuth2 ????? ??
app.oauth2.redirect-uri=${OAUTH2_REDIRECT_URI:http://localhost:5173/login/success}

# ===============================================
# AWS S3 ??
# ===============================================
spring.cloud.aws.credentials.access-key=${AWS_ACCESS_KEY:your-access-key}
spring.cloud.aws.credentials.secret-key=${AWS_SECRET_KEY:your-secret-key}
spring.cloud.aws.region.static=${AWS_REGION:ap-northeast-2}
spring.cloud.aws.s3.bucket=${AWS_S3_BUCKET:orakgaraki-bucket}
spring.cloud.aws.s3.endpoint=${AWS_S3_ENDPOINT:https://s3.ap-northeast-2.amazonaws.com}

# ===============================================
# ?? ??? ??
# ===============================================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB
spring.servlet.multipart.enabled=true
spring.servlet.multipart.file-size-threshold=0

# ===============================================
# ?? ??
# ===============================================
logging.config=classpath:log4j2-spring.xml
logging.level.com.ssafy.lab.orak=DEBUG
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.web=INFO
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ===============================================
# Swagger/OpenAPI ??
# ===============================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=alpha
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.doc-expansion=none

# ===============================================
# CORS ??
# ===============================================
spring.web.cors.allowed-origins=http://localhost:3000,http://localhost:5173,http://localhost:8081
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true
spring.web.cors.max-age=3600

# ===============================================
# Jackson JSON ??
# ===============================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Seoul
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.deserialization.fail-on-unknown-properties=false

# ===============================================
# ???? ??
# ===============================================
spring.profiles.active=${SPRING_PROFILES_ACTIVE:local}

# ===============================================
# ????? ??
# ===============================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.info.env.enabled=true

# ===============================================
# ?? ??
# ===============================================
spring.cache.type=redis
spring.cache.redis.time-to-live=600000
spring.cache.redis.cache-null-values=false

# ===============================================
# ?? ?? ??
# ===============================================
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never
server.error.include-exception=false